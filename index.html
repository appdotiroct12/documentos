<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload e Exibição de Arquivos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      color: #333;
    }
    form {
      margin-bottom: 20px;
    }
    #file-list {
      list-style: none;
      padding: 0;
    }
    #file-list li {
      margin: 5px 0;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 5px;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <h1>Upload de Arquivos</h1>
  <form id="upload-form">
    <label for="file-input">Selecione um arquivo:</label>
    <input id="file-input" type="file" multiple />
    <button id="upload-button" type="button">Fazer Upload</button>
  </form>

  <h2>Arquivos Enviados:</h2>
  <ul id="file-list"></ul>

  <script>
    const fileInput = document.getElementById("file-input");
    const uploadButton = document.getElementById("upload-button");
    const fileList = document.getElementById("file-list");

    // Carrega os arquivos salvos no LocalStorage ao carregar a página
    function loadFiles() {
      const storedFiles = JSON.parse(localStorage.getItem("userFiles")) || [];
      fileList.innerHTML = "";
      storedFiles.forEach(file => {
        const li = document.createElement("li");
        const link = document.createElement("a");
        link.href = file.content;
        link.download = file.name;
        link.textContent = file.name;
        li.appendChild(link);
        fileList.appendChild(li);
      });
    }

    // Salva arquivos no LocalStorage
    function saveFiles(files) {
      const storedFiles = JSON.parse(localStorage.getItem("userFiles")) || [];
      files.forEach(file => {
        const reader = new FileReader();
        reader.onload = function (e) {
          storedFiles.push({ name: file.name, content: e.target.result });
          localStorage.setItem("userFiles", JSON.stringify(storedFiles));
          loadFiles();
        };
        reader.readAsDataURL(file); // Converte o arquivo em base64
      });
    }

    // Evento de clique no botão de upload
    uploadButton.addEventListener("click", () => {
      if (fileInput.files.length > 0) {
        saveFiles(Array.from(fileInput.files));
        fileInput.value = ""; // Limpa o input
      } else {
        alert("Por favor, selecione pelo menos um arquivo.");
      }
    });

    // Carrega os arquivos ao iniciar
    loadFiles();
  </script>
</body>
</html>
